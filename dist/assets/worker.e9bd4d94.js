(function(){"use strict";const b=Symbol("Comlink.proxy"),C=Symbol("Comlink.endpoint"),L=Symbol("Comlink.releaseProxy"),E=Symbol("Comlink.thrown"),S=t=>typeof t=="object"&&t!==null||typeof t=="function",R={canHandle:t=>S(t)&&t[b],serialize(t){const{port1:e,port2:n}=new MessageChannel;return p(t,e),[n,[n]]},deserialize(t){return t.start(),N(t)}},T={canHandle:t=>S(t)&&E in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},M=new Map([["proxy",R],["throw",T]]);function p(t,e=self){e.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:o,type:l,path:a}=Object.assign({path:[]},r.data),i=(r.data.argumentList||[]).map(f);let s;try{const c=a.slice(0,-1).reduce((h,m)=>h[m],t),u=a.reduce((h,m)=>h[m],t);switch(l){case"GET":s=u;break;case"SET":c[a.slice(-1)[0]]=f(r.data.value),s=!0;break;case"APPLY":s=u.apply(c,i);break;case"CONSTRUCT":{const h=new u(...i);s=j(h)}break;case"ENDPOINT":{const{port1:h,port2:m}=new MessageChannel;p(t,m),s=H(h,[h])}break;case"RELEASE":s=void 0;break;default:return}}catch(c){s={value:c,[E]:0}}Promise.resolve(s).catch(c=>({value:c,[E]:0})).then(c=>{const[u,h]=w(c);e.postMessage(Object.assign(Object.assign({},u),{id:o}),h),l==="RELEASE"&&(e.removeEventListener("message",n),P(e))})}),e.start&&e.start()}function O(t){return t.constructor.name==="MessagePort"}function P(t){O(t)&&t.close()}function N(t,e){return y(t,[],e)}function d(t){if(t)throw new Error("Proxy has been released and is not useable")}function y(t,e=[],n=function(){}){let r=!1;const o=new Proxy(n,{get(l,a){if(d(r),a===L)return()=>g(t,{type:"RELEASE",path:e.map(i=>i.toString())}).then(()=>{P(t),r=!0});if(a==="then"){if(e.length===0)return{then:()=>o};const i=g(t,{type:"GET",path:e.map(s=>s.toString())}).then(f);return i.then.bind(i)}return y(t,[...e,a])},set(l,a,i){d(r);const[s,c]=w(i);return g(t,{type:"SET",path:[...e,a].map(u=>u.toString()),value:s},c).then(f)},apply(l,a,i){d(r);const s=e[e.length-1];if(s===C)return g(t,{type:"ENDPOINT"}).then(f);if(s==="bind")return y(t,e.slice(0,-1));const[c,u]=k(i);return g(t,{type:"APPLY",path:e.map(h=>h.toString()),argumentList:c},u).then(f)},construct(l,a){d(r);const[i,s]=k(a);return g(t,{type:"CONSTRUCT",path:e.map(c=>c.toString()),argumentList:i},s).then(f)}});return o}function x(t){return Array.prototype.concat.apply([],t)}function k(t){const e=t.map(w);return[e.map(n=>n[0]),x(e.map(n=>n[1]))]}const A=new WeakMap;function H(t,e){return A.set(t,e),t}function j(t){return Object.assign(t,{[b]:!0})}function w(t){for(const[e,n]of M)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},A.get(t)||[]]}function f(t){switch(t.type){case"HANDLER":return M.get(t.name).deserialize(t.value);case"RAW":return t.value}}function g(t,e,n){return new Promise(r=>{const o=_();t.addEventListener("message",function l(a){!a.data||!a.data.id||a.data.id!==o||(t.removeEventListener("message",l),r(a.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)})}function _(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class V{constructor(e){this.board=e,this.m=Math.floor(Math.sqrt(e.length)),this.n=e.length/this.m,this.length=e.length,this.isFinished=!1,this.solution=[]}search(e=0,n=0){if(n===this.length&&(n=0,e+=1,e===this.length)){this.solution.push(this.board.map(o=>[...o])),this.isFinished=!0;return}if(this.board[e][n]){n+=1,this.search(e,n);return}const r=this.constructCandidates(this.board,e,n,this.m,this.n);for(let o=0;o<r.length;o++)if(this.board[e][n]=r[o],this.search(e,n+1),this.board[e][n]=0,this.isFinished)return}constructCandidates(e,n,r,o,l){const a=new Set([...this.getRowElements(e,n),...this.getColElements(e,r),...this.getBoxElements(e,n,r,o,l)]),i=[];for(let s=1;s<=e.length;s++)a.has(s)||i.push(s);return i}getRowElements=(e,n)=>e[n].filter(r=>r);getColElements=(e,n)=>e.map(r=>r[n]).filter(r=>r);getBoxElements=(e,n,r,o,l)=>{const a=Math.floor(n/o)*o,i=Math.floor(r/l)*l,s=[];for(let c=a;c<a+o;c++)for(let u=i;u<i+l;u++)s.push(e[c][u]);return s}}p(V)})();
